function showResults(b){var c="";var a="";$.each(b.results,function(i,k){var f=k.name;var h=k.image?k.image.icon_url:"";var d=k.original_release_date;$.each(k.platforms,function(m,n){a+=(n.name+" ")});var j=k.deck;var l=k.description;var g=k.id;var e=k.site_detail_url;c+="<a href='game.php?idgame="+g+"'><li id='glist'><p>"+f+"</p></li><img src="+h+"></a><br /><a id='links' href='links-speichern.php?idgame="+g+"'> Links zum Spiel speichern </a><p>"+d+"</p><p>"+a+"</p><p>"+j+"</p><br/>"});$("#result").html(c)}function showResultsgame(k){var f="";var b="";var i=k.results;var d=i.name;var g=i.image?i.image.icon_url:"";var a=i.original_release_date;$.each(i.platforms,function(l,m){b+=(m.name+" ")});var h=i.deck;var j=i.description;var e=i.id;var c=i.site_detail_url;f+="<a href='game.php?idgame="+e+"'><li id='glist' ><p>"+d+"</p></li><img src="+g+"></a><p>"+a+"</p><p>"+b+"</p><p>"+h+"</p><p>"+j+"</p><a href='"+c+"'><p>Weitere Informationen</p></a>";$("#result").html(f)}var getUrlParameter=function getUrlParameter(a){var d=decodeURIComponent(window.location.search.substring(1)),c=d.split("&"),e,b;for(b=0;b<c.length;b++){e=c[b].split("=");if(e[0]===a){return e[1]===undefined?true:e[1]}}};$(document).ready(function(){function d(j,o,k){var g="http://giantbomb.com/api";var l="969800c88a4d50d16ff61120543367584a42ce19";k=k||{};var n,p=[],h;$.each(k,function(q,r){n=q+"="+r;p.push(n)});h=(p.length>0)?"&"+p.join("&"):"";if(j=="/game/"){var i=g+j+o+"?api_key="+l+h}else{var i=g+j+"?api_key="+l+o+h}if(j=="/search"||"/games"){var m="showResults"}if(j=="/game/"){var m="showResultsgame"}$.ajax({url:i,type:"GET",data:{format:"jsonp",json_callback:m,},dataType:"jsonp",}).done(function(q){showResults(q.results);console.log(q)})}function c(){var i=$("#suche").val();var h={query:i,resources:"game"};var g="";d("/search",g,h)}function b(j){var i="/games";var g="&platforms="+j;var h={field_list:"name,description,company,deck,image,id,original_release_date"};d(i,g,h)}function e(g){var i="/game/";var h={};d(i,g,h)}$("#enter").click(function(g){var h=$("#suche").val();if(h!==""){c()}});$("#suche").keypress(function(h){var g=(h.keyCode?h.keyCode:h.which);if(g=="13"){h.preventDefault();var i=$("#suche").val();if(i!==""){c()}}});if(getUrlParameter("id")){var f=getUrlParameter("id");b(f)}if(getUrlParameter("idgame")){var a=getUrlParameter("idgame");e(a)}});